version: 2.1

jobs:
  build:
    docker:
      - image: circleci/openjdk:8-jdk-browsers  # This image includes browsers support for Selenide
    steps:
      - checkout
      - run:
          name: Install Java and other dependencies
          command: |
            sudo gpg --keyserver keyserver.ubuntu.com --recv-keys 8AC3B29174885C03
            sudo gpg --export --armor 8AC3B29174885C03 | sudo apt-key add -
            sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 4EB27DB2A3B88B8B
            sudo apt-get update
            sudo apt-get install -y software-properties-common
            sudo add-apt-repository --yes https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/
            sudo apt-get update
            sudo apt-get install -y adoptopenjdk-8-hotspot  # Install AdoptOpenJDK 8
            sudo apt-get install -y maven                # Install Maven (if your project uses it)
            # Add other necessary commands for installing build tools or dependencies

      - run:
          name: Run Selenide tests
          command: |
            export DISPLAY=:99
            Xvfb :99 -screen 0 1280x1024x24 > /dev/null 2>&1 &
            mvn clean test  # Replace with your build command (e.g., gradle build, etc.)

workflows:
  version: 2
  build_and_test:
    jobs:
      - build